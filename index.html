<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Manak : C++ Unit Benchmarking and Testing Library">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Manak</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/Manak-org/Manak">View on GitHub</a>

          <h1 id="project_title">Manak</h1>
          <h2 id="project_tagline">C++ Unit Benchmarking and Testing Library</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/Manak-org/Manak/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/Manak-org/Manak/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="manak-c-unit-benchmarking-and-testing-library" class="anchor" href="#manak-c-unit-benchmarking-and-testing-library" aria-hidden="true"><span class="octicon octicon-link"></span></a>Manak: C++ Unit Benchmarking and Testing Library</h1>

<h3>
<a id="latest-stable-release-manak-200" class="anchor" href="#latest-stable-release-manak-200" aria-hidden="true"><span class="octicon octicon-link"></span></a>Latest Stable Release: <a href="https://github.com/Manak-org/Manak/archive/v2.0.0.zip">Manak 2.0.0</a>
</h3>

<h3>
<a id="contact-us" class="anchor" href="#contact-us" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contact Us:</h3>

<ul>
<li>Join IRC channel #manak on Freenode</li>
<li>Get in touch with Gitter</li>
<li>Or you can just drop a mail on <a href="mailto:sumedhghaisas@gmail.com">sumedhghaisas@gmail.com</a>
</li>
</ul>

<h2>
<a id="introduction" class="anchor" href="#introduction" aria-hidden="true"><span class="octicon octicon-link"></span></a>Introduction</h2>

<p>Manak unit benchmarking and testing library provides both easy to use and flexible 
API. As both benchmarking and testing framework are combined into one, Manak comes
handy for projects with continuous integration. Manak implements xUnit achitecture
and improves upon it.</p>

<p>Manak offers following unique features - </p>

<ul>
<li>Timing and testing both in a single unit</li>
<li>Comparison between different implementations and changing implementation(for judging improvements)</li>
<li>Support for 'Groups' to remove code redundancy and improve runtime</li>
<li>Implements framework for randomized tests</li>
<li>Complete regular expression support for running specific cases</li>
<li>Supports HTML output generation, also supports multiple output generation</li>
<li>Supports both Static and Dynamic Linkage</li>
<li>Implemented in C++11 and scalable to C++14</li>
<li>No external dependency(Specially for Windows Users :D)</li>
</ul>

<h2>
<a id="the-idea-behind-manak" class="anchor" href="#the-idea-behind-manak" aria-hidden="true"><span class="octicon octicon-link"></span></a>The Idea Behind Manak</h2>

<p>'Manak' in Sanskrit means standard. Manak aims at a framework for standardization
of code. Currently Manak combines the 2 most important requirements for any C++
project, testing and benchmarking. Manak understands that benchmarking is not just 
timing, it must also be supported with a rich comparison framework. And this is 
not the end. The next milestone is to integrate the memory mesurement tools. With 
proper steps, we will build a one stop solution for all continuous integration 
issues. </p>

<h3>
<a id="check-out-wiki-for-user-guide" class="anchor" href="#check-out-wiki-for-user-guide" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check out <a href="https://github.com/Manak-org/Manak/wiki">Wiki</a> for User Guide.</h3>

<h3>
<a id="check-out-developers-guide" class="anchor" href="#check-out-developers-guide" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check out <a href="http://Manak-org.github.io/Manak/html/index.html">Developer's Guide</a>.</h3>

<h3>
<a id="check-out-gsoc-2015-ideas-page" class="anchor" href="#check-out-gsoc-2015-ideas-page" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check out <a href="https://github.com/Manak-org/Manak/wiki/Google-Summer-of-Code-2015---Ideas-Page">GSOC 2015 Ideas Page</a>
</h3>

<h2>
<a id="how-to-install" class="anchor" href="#how-to-install" aria-hidden="true"><span class="octicon octicon-link"></span></a>How To Install</h2>

<ol>
<li>Create directory build.</li>
<li>cd into build and run command <em><strong>cmake ../</strong></em>
</li>
<li>For building from source run command <em><strong>make</strong></em>, this will create executable kif
and flatten inside bin.</li>
<li>To install run command <em><strong>sudo make install</strong></em>
</li>
</ol>

<p>Of course, all this is unneccessary if you want to use only static linkage. 
Just copy the src/manak folder to the default search path and you are done.</p>

<h2>
<a id="an-overview" class="anchor" href="#an-overview" aria-hidden="true"><span class="octicon octicon-link"></span></a>An Overview</h2>

<p>A simple case is given below -   </p>

<div class="highlight highlight-cpp"><pre>#<span class="pl-k">define</span> <span class="pl-en">MANAK_SIMPLE_MODULE</span> mod1
#<span class="pl-k">define</span> <span class="pl-en">MANAK_AUTO_MAIN</span>
#<span class="pl-k">define</span> <span class="pl-en">MANAK_INIT</span>

#<span class="pl-k">include</span> <span class="pl-s1"><span class="pl-pds">&lt;</span>manak/manak.hpp<span class="pl-pds">&gt;</span></span>

<span class="pl-en">MANAK_AUTO_BENCHMARK_CASE</span>(B1)
{
  MEASURE
  (
    <span class="pl-k">for</span>(<span class="pl-s3">size_t</span> i = <span class="pl-c1">0</span>;i &lt; <span class="pl-c1">10000</span>;i++);
  )

  TEST
  (
    <span class="pl-s3">MANAK_ASSERT_TRUE</span>(<span class="pl-c1">1</span> == <span class="pl-c1">1</span>);
  )
}</pre></div>

<p>This will create a benchmark case with name 'B1' which will time the 
for loop given inside 'MEASURE' and run the tests given inside 'TEST' block. 
The case is run for certain number of iterations, the default is 10. The iterations
help to gt average score and also for randomized tests, where sometimes x out of
n times the test has to be passed.  </p>

<p>The ouput will be written to file 'benchmark_stat.html'. TThe output is easy to
read and verbose. </p>

<div class="highlight highlight-cpp"><pre>#<span class="pl-k">define</span> <span class="pl-en">MANAK_MODULE</span> mod1
#<span class="pl-k">define</span> <span class="pl-en">MANAK_AUTO_MAIN</span>
#<span class="pl-k">define</span> <span class="pl-en">MANAK_INIT</span>

#<span class="pl-k">include</span> <span class="pl-s1"><span class="pl-pds">&lt;</span>manak/manak.hpp<span class="pl-pds">&gt;</span></span>

<span class="pl-en">MANAK_AUTO_BENCHMARK_CASE</span>(B1, With10000)
{
  MEASURE
  (
    <span class="pl-k">for</span>(<span class="pl-s3">size_t</span> i = <span class="pl-c1">0</span>;i &lt; <span class="pl-c1">10000</span>;i++);
  )

  TEST
  (
    <span class="pl-s3">MANAK_ASSERT_TRUE</span>(<span class="pl-c1">1</span> == <span class="pl-c1">1</span>);
  )
}

<span class="pl-en">MANAK_AUTO_BENCHMARK_CASE</span>(B1, With100000)
{
  MEASURE
  (
    <span class="pl-k">for</span>(<span class="pl-s3">size_t</span> i = <span class="pl-c1">0</span>;i &lt; <span class="pl-c1">100000</span>;i++);
  )

  TEST
  (
    <span class="pl-s3">MANAK_ASSERT_TRUE</span>(<span class="pl-c1">1</span> == <span class="pl-c1">1</span>);
  )
}</pre></div>

<p>The above code will measure the time taken by the loops and compare them against 
each other in the output. Observe that the case name is same and the second 
argument(the library name in Manak hierarchy) is different. </p>

<p>See that its a code redundancy. The solution is through Groups - </p>

<div class="highlight highlight-cpp"><pre><span class="pl-st">template</span>&lt;<span class="pl-s3">size_t</span> index&gt;
<span class="pl-en">MANAK_GROUP</span>(TestGroup);

<span class="pl-s3">size_t</span> iter;
std::string l_name;

<span class="pl-en">GINIT</span>(<span class="pl-s3">size_t</span> n, <span class="pl-s">const</span> std::string&amp; str)
{
  iter = n;
  name = str;
}

<span class="pl-en">MANAK_AUTO_GROUP_BENHMARK_CASE</span>(<span class="pl-s1"><span class="pl-pds">"</span>ForLoops<span class="pl-pds">"</span></span>, l_name)
{
  MEASURE
  (
    <span class="pl-k">for</span>(<span class="pl-s3">size_t</span> i = <span class="pl-c1">0</span>;i &lt; iter;i++);
  )
}

<span class="pl-en">MANAK_AUTO_GROUP_BENCHMARK_CASE</span>(<span class="pl-s1"><span class="pl-pds">"</span>Test<span class="pl-pds">"</span></span>, <span class="pl-s1"><span class="pl-pds">"</span>Lib1<span class="pl-pds">"</span></span>)
{
  <span class="pl-c">//Can use iter and name here</span>
} 

<span class="pl-en">MANAK_GROUP_END</span>();

<span class="pl-en">MANAK_ADD_GROUP</span>(TestGroup&lt;<span class="pl-c1">1</span>&gt;, <span class="pl-c1">1000</span>, <span class="pl-s1"><span class="pl-pds">"</span>With1000<span class="pl-pds">"</span></span>);
<span class="pl-en">MANAK_ADD_GROUP</span>(TestGroup&lt;<span class="pl-c1">2</span>&gt;, <span class="pl-c1">10000</span>, <span class="pl-s1"><span class="pl-pds">"</span>With10000<span class="pl-pds">"</span></span>);</pre></div>

<p>Another important usgae of groups is that the cases inside can share variables.
Imagine that you are testing a variable which takes lot of time to create. 
So rather than wasting time while creating it in each case create it in 'GINIT'
and usage is freely inside the group. Groups act like c++ Classes. Example of
this is also shown in the above code.</p>

<p>Sometimes you don't want to compare the code against each other but time and test
a function with many different parameters. Maybe while regression testing.
For this parametrized benchmarks can be used.</p>

<div class="highlight highlight-cpp"><pre><span class="pl-st">void</span> <span class="pl-en">fun</span>(<span class="pl-s3">ize_t</span> a, <span class="pl-s3">size_t</span> b)
{

}

<span class="pl-en">MANAK_ADD_CASE</span>(MANAK_CREATE_BENCHMARK_WITH_TEMPLATE(B1, fun)-&gt;AddArgs(<span class="pl-c1">0</span>, <span class="pl-c1">0</span>)-&gt;AddArgs(<span class="pl-c1">1</span>, <span class="pl-c1">1</span>));</pre></div>

<p>What if you want to test it against 100 set of parameters -</p>

<div class="highlight highlight-cpp"><pre>std::list&lt;std::tuple&lt;<span class="pl-s3">size_t</span>, <span class="pl-s3">size_t</span>&gt;&gt; <span class="pl-en">GetArgs</span>()
{
  std::list&lt;std::tuple&lt;<span class="pl-s3">size_t</span>, <span class="pl-s3">size_t</span>&gt;&gt; out;

  <span class="pl-k">for</span>(<span class="pl-s3">size_t</span> i = <span class="pl-c1">0</span>;i &lt; <span class="pl-c1">100</span>;i++)
    out.<span class="pl-s3">emplace_back</span>(i, i);

  <span class="pl-k">return</span> out;
}

<span class="pl-en">MANAK_ADD_CASE</span>(MANAK_CREATE_BENCHMARK_WITH_TEMPLATE(B1, fun)-&gt;AddCustomArgs(GetArgs));</pre></div>

<p>Check out the the wiki for many more such features.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Manak maintained by <a href="https://github.com/Manak-org">Manak-org</a></p>
        <p>Published with <a href="http://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
