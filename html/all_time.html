<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Manak: All About Timing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Manak
   &#160;<span id="projectnumber">0.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('all_time.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">All About Timing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Let us start by timing the simplest function.</p>
<div class="fragment"><div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1)</div>
<div class="line">{</div>
<div class="line">  Code;</div>
<div class="line">}</div>
</div><!-- fragment --><p>In this case the entire function call will be timed. Sometimes the Code to measure is more time sensetive. The measue code may require some other code for setup or tear down. For this Manak provides 'Measure' macro.</p>
<div class="fragment"><div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1)</div>
<div class="line">{</div>
<div class="line">  SetUp Code;</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="benchmark__case_8hpp.html#ae14657e1f2d907faa918ff681c81d895">Measure</a></div>
<div class="line">  (</div>
<div class="line">    Code</div>
<div class="line">  )</div>
<div class="line">  </div>
<div class="line">  TearDown Code;</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="benchmark__case_8hpp.html#ae14657e1f2d907faa918ff681c81d895">Measure</a></div>
<div class="line">  (</div>
<div class="line">    Code;</div>
<div class="line">  )</div>
<div class="line">  </div>
<div class="line">  TearDown Code;</div>
<div class="line">}</div>
</div><!-- fragment --><p>In this case only the code inside Measure blocks will be timed. There can be any number of 'Measure' blocks inside a benchmark case. The time of all the 'Measure' blocks will be sumed.</p>
<p>All the benchmarks cases run for certain number of iterations and the final time is taken as the average of all the iterations. If number of iterations are not specified for any benchmark case default is used(which is 10). Check out <a class="el" href="set_env.html#set_env_mdi">MANAK_DEFAULT_ITERATIONS</a> for setting default number of iterations. Sometimes the setup code or the tear down is very expensive in terms of time and is only required to be executed once. Even with 'Measure' blocks, setup and teardown code is executed every iteration. This problem can be solved with 'Repeat' macro.</p>
<div class="fragment"><div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1)</div>
<div class="line">{</div>
<div class="line">  SetUp Code;</div>
<div class="line">  </div>
<div class="line">  <a class="code" href="benchmark__case_8hpp.html#aa0fdc74d5cc0b16ad5c9c2a6f78bf18d">Repeat</a></div>
<div class="line">  (</div>
<div class="line">    <a class="code" href="benchmark__case_8hpp.html#ae14657e1f2d907faa918ff681c81d895">Measure</a></div>
<div class="line">    (</div>
<div class="line">      Code</div>
<div class="line">    )</div>
<div class="line">  </div>
<div class="line">    Code;</div>
<div class="line">  </div>
<div class="line">    <a class="code" href="benchmark__case_8hpp.html#ae14657e1f2d907faa918ff681c81d895">Measure</a></div>
<div class="line">    (</div>
<div class="line">      Code;</div>
<div class="line">    )</div>
<div class="line">  )</div>
<div class="line">  TearDown Code;</div>
<div class="line">}</div>
</div><!-- fragment --><p>With 'Repeat' block, only the code inside the 'Repeat' block is executed for number of iterations. Any code outside of 'Repeat' block will not be timed, even 'Measure' blocks. If there are multiple 'Repeat' blocks the only the last 'Repeat' block will be timed.</p>
<p>'Measure' and 'Repeat' blocks can also be used in manually added benchmark cases. For example -</p>
<div class="fragment"><div class="line"><span class="keywordtype">int</span> fun(<span class="keywordtype">int</span> a, <span class="keywordtype">int</span> b)</div>
<div class="line">{</div>
<div class="line">  Code;</div>
<div class="line"></div>
<div class="line">  <a class="code" href="benchmark__case_8hpp.html#aa0fdc74d5cc0b16ad5c9c2a6f78bf18d">Repeat</a></div>
<div class="line">  (</div>
<div class="line">    <a class="code" href="benchmark__case_8hpp.html#ae14657e1f2d907faa918ff681c81d895">Measure</a></div>
<div class="line">    (</div>
<div class="line">      Code to measure;</div>
<div class="line">    )</div>
<div class="line">  )</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="benchmark__case_8hpp.html#ac0c89bd653d645660e205facaec0eeb4">MANAK_ADD_BENCHMARK</a>(<a class="code" href="module__benchmark__case_8hpp.html#a42fd12f274385b4c08b6ba316105ab2d">MANAK_CREATE_BENCHMARK_WITH_TEMPLATE</a>(B1, fun)-&gt;AddArgs(0,0)...);</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sat Nov 15 2014 04:44:49 for Manak by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
