<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>Manak: Comparison Framework</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Manak
   &#160;<span id="projectnumber">2.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('comp.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Comparison Framework </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="comp_sm"></a>
Comparison Framework for Simple Module</h1>
<p>In simple module, benchmark cases are added with a default library name. Understand the library concept by checking out <a class="el" href="mhierarchy.html#hierarchy_case">Benchmark Case</a>. The current results can be saved for comparison by passing '-s &lt;filename&gt;' command line option to the executable. This saved file can be later loaded with '-c &lt;filename&gt;' for comparison. Remember while saving, only the cases which actually ran will be saved. For example, if given '-r' options for running specific cases, only the benchmark cases satisfying the regular expression will be saved. See <a class="el" href="quick_guide.html#qg_rsc">Running Specific Cases</a> for more information on running specific benchmarks.</p>
<h2><a class="anchor" id="comp_sm_ex"></a>
Comparison framework Examples</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define MANAK_SIMPLE_MODULE bench</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_AUTO_MAIN</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_INIT</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="manak_8hpp.html">manak/manak.hpp</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 1000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
</div><!-- fragment --><p>NOTE: 'MANAK_AUTO_MAIN' or 'MANAK_INIT' has to be defined only once in case of multi file project. Check out <a class="el" href="multi_file.html">Using Manak Effectively in Multi File Project</a> for more information.</p>
<p>Save the results of this benchmark in 'bench1.txt' for comparison.</p>
<div class="fragment"><div class="line">g++ -std=c++11 &lt;name&gt;.cpp</div>
<div class="line">./a.out -s bench1.txt</div>
</div><!-- fragment --><p>Change &lt;name&gt;.cpp to -</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define MANAK_SIMPLE_MODULE bench</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_AUTO_MAIN</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_INIT</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="manak_8hpp.html">manak/manak.hpp</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 10000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
</div><!-- fragment --><p>Compare the new code with the older -</p>
<div class="fragment"><div class="line">g++ -std=c++11 &lt;name&gt;.cpp</div>
<div class="line">./a.out -c bench1.txt</div>
</div><!-- fragment --><p>The output of this procedure will look like <a href="samples/comp_1.html">Sample HTML ouput</a></p>
<p>The sample TXT output is -</p>
<div class="fragment"><div class="line"><span class="preprocessor">######################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Manak C++ Benchmarking Library                                    #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Version 1.1.0                                                     #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Created at Jan 31 23:27:53 2015                                   #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">######################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line">       Case Name              bench               </div>
<div class="line">B1                            +30.7(3.4) </div>
</div><!-- fragment --><p>Manak by default generates HTML output. Check out <a class="el" href="out_format.html">All About Outputs</a> for more information on output formats.</p>
<p>The value in the bracket is the old benchmarked value which was saved in 'bench1.txt'. The '+' sign in front of the entry suggests that the current benchmark is higher in magnitude. On the other hand if the current entry is lower in magnitude, output will show a negative sign. This comparison is done based on tolerance. Lack of sign implies the benchmarks are equivalent with respect to given tolerance. Here no tolerance value is given for 'B1' so default tolerance is assumed(10 microseconds). See <a class="el" href="set_env.html#set_env_mdt">MANAK_DEFAULT_TOLERANCE</a> for setting default tolerance value. In comparison with tolerance 'value +- tolerance' is considered equivalent. Tolerance value can be given for a perticular benchmark case with 'MANAK_AUTO_BENCHMARK_CASE_T' or 'MANAK_BENCHMARK_CASE_T'. See <a class="el" href="s_mod.html">Simple Benchmark Module</a> for more information on these macros.</p>
<p>For loading the appropriate old value into the benchmark case each benchmark case is assigned a unique name. This unique name depends on its location in the hierarchy. Hence its not necessary to maintain the exact state of the benchmarking module to load the old saved results.</p>
<p>For example let us change the code of &lt;name&gt;.cpp to - </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define MANAK_SIMPLE_MODULE bench</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_AUTO_MAIN</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_INIT </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="manak_8hpp.html">manak/manak.hpp</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 10000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B2)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 100000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
</div><!-- fragment --><p>In this case the output(TXT... HTML output will be similar) will look like -</p>
<div class="fragment"><div class="line"><span class="preprocessor">######################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Manak C++ Benchmarking Library                                    #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Version 1.0.0                                                     #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Created at Nov 15 04:00:25 2014                                   #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">######################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">       Case Name              base_library        </div>
<div class="line"></div>
<div class="line">B1                            +33.6(3.7)          </div>
<div class="line">B2                            337.2</div>
</div><!-- fragment --><p>Here only 'B1' is compared as only its old data was available. Here if we shift 'B1' inside any suite, its unique signature will change and it won't be compared with the old entry. Also remember the values are loaded against the associated library in a benchmark case, changing the library name will also affect the loading process.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define MANAK_SIMPLE_MODULE bench</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_AUTO_MAIN</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_INIT</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="manak_8hpp.html">manak/manak.hpp</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="manak__macros_8hpp.html#ac70ac27f45a67029b99088a024b7ec09">MANAK_AUTO_SUITE</a>(Suite1);</div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 10000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="manak__macros_8hpp.html#adffecc8a604080c811777e4e513b9beb">MANAK_AUTO_SUITE_END</a>();</div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B2)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 100000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
</div><!-- fragment --><p>The output(TXT) will be -</p>
<div class="fragment"><div class="line"><span class="preprocessor">######################################################################</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Manak C++ Benchmarking Library                                    #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Version master.0.0                                                #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#  Created at Nov 15 04:04:09 2014                                   #</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">######################################################################</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">       Case Name              base_library        </div>
<div class="line"></div>
<div class="line">B2                            339.7               </div>
<div class="line">B1                            33.6                </div>
</div><!-- fragment --><h1><a class="anchor" id="comp_nm"></a>
Comparison Framework of Normal Module</h1>
<p>In normal benchmarking module multiple libraries are compared against each other. The libraries can also be compared along time. The comparison framework of normal module is built around the comparison structure of simple module. Time based comparison structure of both modules is identical hence see <a class="el" href="comp.html#comp_sm">Comparison Framework for Simple Module</a> for time based comparison. In normal module comparison framework, libraries associed with benchmark case are compared against each other.</p>
<p>For example - </p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define MANAK_MODULE bench</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_AUTO_MAIN</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_INIT </span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="manak_8hpp.html">manak/manak.hpp</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1, lib1)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 1000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1, lib2)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 10000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B2, lib2)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 1000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
</div><!-- fragment --><p>The output of this code can be seen <a href="samples/comp_2.html">HERE</a>.</p>
<p>The examples shown in <a class="el" href="comp.html#comp_sm_ex">Comparison framework Examples</a> would work equivalently on this code in time based comparison. Remember, all suites carry their own namespace.</p>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#define MANAK_MODULE bench</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_AUTO_MAIN</span></div>
<div class="line"><span class="preprocessor"></span><span class="preprocessor">#define MANAK_INIT</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="manak_8hpp.html">manak/manak.hpp</a>&gt;</span></div>
<div class="line"></div>
<div class="line"><a class="code" href="manak__macros_8hpp.html#ac70ac27f45a67029b99088a024b7ec09">MANAK_AUTO_SUITE</a>(Suite1);</div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1, lib1)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 1000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
<div class="line"></div>
<div class="line"><a class="code" href="manak__macros_8hpp.html#adffecc8a604080c811777e4e513b9beb">MANAK_AUTO_SUITE_END</a>();</div>
<div class="line"></div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B1, lib2)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 10000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
<div class="line"><a class="code" href="module__benchmark__case_8hpp.html#a57b66a0d95282c208124d1bdac0f8d2e">MANAK_AUTO_BENCHMARK_CASE</a>(B2, lib2)</div>
<div class="line">{</div>
<div class="line">  <a class="code" href="manak__benchmark__macros_8hpp.html#a37c0e143435c7c23afdda41fbbc0a689">MEASURE</a></div>
<div class="line">  (</div>
<div class="line">    <span class="keywordflow">for</span>(<span class="keywordtype">size_t</span> i = 0;i &lt; 1000;i++);</div>
<div class="line">  )</div>
<div class="line">}</div>
</div><!-- fragment --><p>And the output <a href="samples/comp_3.html">HERE</a>. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Thu Feb 5 2015 21:20:27 for Manak by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.6 </li>
  </ul>
</div>
</body>
</html>
